# 1. 데이터 모델링

데이터베이스의 모델링은 ‘**현실 세계를 단순화하여 표현하는 기법**’이다. 

## 1.1 모델링

**모델링의 특징**

1. 추상화
2. 단순화
3. 명확화

**모델링의 세 가지 관점**

1. 데이터 관점 : 데이터들의 관계
2. 프로세스 관점 : 업무 위주의 모델링
3. 데이터와 프로세서의 상관 관점 : 프로세스의 흐름에 따라 데이터가 어떤 영향을 받는지를 모델링

**모델링의 세 가지 단계**

1. 개념적 데이터 모델링 : 중심적이고 포괄적인 모델링
2. 논리적 데이터 모델링 : 재사용성이 높은 모델링. key, 속성, 관계 등을 모두 표현하는 단계
3. 물리적 데이터 모델링 : 실제 데이터베이스의 물리적 성격을 고려하여 표현

<br>

**스키마**

**ANSI-SPARC 아키텍쳐** : 외부 단계(스키마) - 개념 단계(스키마) - 내부 단계 스키마 <br>
분리 목적 : 데이터베이스에 대한 사용자들의 관점과 실제 표현되는 물리적인 방식을 분리하기 위함.

**3단계 스키마 구조**

1. 외부 스키마 : 사용자 관점 → Multiple User’s View
2. 개념 스키마 : 전체 데이터베이스. 데이터들 간의 관계 → Community View of DB
3. 내부 스키마 : 물리적인 저장 구조. 실질적인 데이터의 저장 구조나 컬럼 정의, 인덱스 → Physical Representation

- **논리적 독립성** : 개념 스키마가 변경되어도 외부 스키마는 영향 받지 않는다. 

- **물리적 독립성** : 내부 스키마가 변경되어도 외부/개념 스키마는 영향받지 않는다. 

<br>

**ERD 작성 순서**

1. Entity 도출
2. Entity 적절하게 배치
3. Entity 간의 관계 설정
4. 관계명 기입
5. 관계의 참여도 기입
6. 관계의 필수/선택 여부를 기입

## **1.2 엔티티 (Entity)**

독립체. 데이터베이스에서 Entity는 식별이 가능한 객체.

> Entity = `Table`
> 
> 
> 인스턴스 = `Row`
> 
> 속성 = `Column`
> 

**Entity 특징**

1) 업무에서 쓰여야 한다. 

2) unique함을 보장할 수 있는 식별자가 있어야 한다. (인스턴스를 식별 가능하도록)

3) 2개 이상의 인스턴스를 가지고 있어야 한다. (row)

4) 반드시 속성을 가지고 있어야 한다. 

5) 다른 entity와 1개 이상의 관계를 가지고 있어야 한다. 

**Entity 분류**

- 유/무형
    - 유형 : 물리적인 형태 (ex. 상품, 회원)
    - 개념 : 물리적인 형태 없음. 개념적 (ex. 부서, 학과)
    - 사건 : 행위로 발생. 통계 자료로 이용 (ex. 주문, 이벤트 응모)
- 발생시점
    - **기본** : 독립적으로 생성
        
        ex. 상품(product) - (`product_id`, price), 회원(user) -(`user_id`, address, name) )
        
    - **중심** : 기본 엔티티로부터 파생. 행위
        
        ex. 주문(order) - (order_id(pk), `user_id`, payment, order_date) )
        
    - **행위** : 2개 이상의 엔티티로부터 파생
        
        ex. 주문 내역(order_history) - (`order_id`, `product_id`, amount )
        

**Entity 명**

- 업무에서 실제 쓰이는 용어 사용
- 단수 명사 표현. 띄어쓰기 하지 않음
- 한글은 약어 사용하지 않고 영어는 대문자
- 다른 엔티티와 의미상 중복될 수 없다.
- 생성 의미대로 부여

## 1.3 속성(Attribute)

사람이나 사물을 정의할 때 여러 가지 특징들이 수식어로 붙는다. 속성은 의미상 더 이상 쪼개지지 않는 레벨이어야 한다. 

> 하나의 속성은 한 개의 속성값만 가질 수 있다.
> 

**엔티티, 인스턴스, 속성, 속성값의 관계** 

> `1 엔티티` = `2개 이상 인스턴스`
> 
> `1 인스턴스` = `2개 이상 속성`
> 
> `1 속성` = `1 속성값`
> 

**속성의 분류** 

- **특성에 따른 분류**
    
    기본속성 : 업무로부터 추출한 모든 일반적인 속성 (ex. 회원-이름, 이메일)
    
    설계속성 : 합리적인 모델링을 위한 속성. (ex. 고유번호)
    
    파생속성 : 다른 속성의 속성값을 계산하거나 특정한 규칙으로 변형하여 생성한 속성 (ex. 상품 재고)
    
- **구성방식에 따른 분류**
    
    PK 속성 : 엔티티의 인스턴스들을 식별할 수 있는 속성
    
    FK 속성 : 다른 엔티티의 속성에서 가져온 속성
    
    일반 속성 : PK, FK를 제외한 나머지 속성
    

**도메인**

속성이 가질 수 있는 **속성값의 범위**

ex. 우편번호는 다섯 자리의 숫자라는 범위를 가지고 있다. 
→ 엔티티를 정의할 때 데이터 타입과 크기로 나타낼 수 있다. 

> `용어 사전` : 엔티티의 속성명을 정의할 때 명확한 의미의 이름을 부여하고 다른 엔티티와의 혼란을 예방하기 위해 이용
> 

## 1.4 관계 (Relationship)

엔티티와 엔티티와의 관계

- 존재 관계 : 존재로 연관성 (직원-부서, 학생-학과)
- 행위 관계 : 특정 행위로 연관성 (회원-주문, 학생-출석부)

**표기법**

- `관계명` : 관계의 이름
    
    모든 관계는 두 개의 관계명을 가짐. 각 엔티티의 관점에서 관계명을 하나씩 가짐.
    
- `관계차수` : 관계에 참여하는 수
    
    `1:1`, `1:M`, `M:N`
    
- `관계선택사양` : 필수인지 선택인지 여부
    
    주문-주문상품 : 필수
    
    학생-출석 : 선택
    

## 1.5 식별자 (Identifiers)

모든 엔티티는 인스턴스를 가지고 있고 인스턴스는 속성으로 자신의 특성을 나타낸다. 식별자는 이런 속성 중 각각의 인스턴스를 구분 가능하게 만들어주는 대표 격인 속성을 의미한다. 

**주식별자(PK)**

**<조건>**

1. 유일성 : 각 인스턴스를 식별할 수 있어야 한다. 
2. 최소성 : 유일성을 보장하는 최소 개수의 속성이어야 한다.
3. 불변성 : 속성값이 되도록 변하지 않아야 한다. 
4. 존재성 : NULL일 수 없다. 

**분류**

- 대표성 여부 : 주식별자 / 보조 식별자
- 스스로 생성되었는지 여부 : 내부 식별자 / 외부 식별자
- 단일 속성의 여부 : 단일 식별자 / 복합 식별자
- 대체 여부 : 원조 식별자 / 대리 식별자

**식별자/비식별자 관계**
- 식별자 관계 : 부모 엔티티의 식별자가 자식 엔티티의 주식별자가 되는 관계. 부모가 필수적. (관계 차수 : `1:1` or `1:M`)
- 비식별자 관계 : 부모 엔티티의 식별자가 자식 엔티티의 일반 속성이 되는 관계. 부모가 선택적. 
